# Starter pipeline
# Start with a minimal pipeline that you can customize to build and deploy your code.
# Add steps that build, run tests, deploy, and more:
# https://aka.ms/yaml

resources:
  - repo: self
steps:
- task: PackerTool@0
  inputs:
    version: '1.8.4'
- task: Packer@1
  inputs:
    connectedServiceType: 'azure'
    azureSubscription: 'AzureDevOps'
    templatePath: 'alma8.pkr.hcl'
    command: 'validate'
  env:
    ARM_SUBSCRIPTION_ID: $(subscription_id)
    ARM_RESOURCE_GROUP: $(resource_group)
    ARM_STORAGE_ACCOUNT: $(storage_account)